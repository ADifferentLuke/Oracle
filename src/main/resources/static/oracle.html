<!DOCTYPE html>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<html lang="en">
<head>
    <link rel="stylesheet" href="style/stylesheet.css">
    <meta charset="UTF-8">
    <title>Oracle v0.1</title>
    <script src="js/jquery-3.7.1.min.js"></script>
    <script src="js/viewport.js"></script>
    <script>
$(window).on('load', function() {
    let searchParams = new URLSearchParams(window.location.search);
    let param = searchParams.get("id");
    $('#world-id').html(param);

    $('#continueButton').click( function(){
        console.log( "Disabling button");
        $('#continueButton').prop('disabled',true);
        let turns = $('#turnCount').val();
        if( turns ){
            display.advance(turns,function(msg){
               $('#continueButton').prop('disabled',false);
            }, function( display, msg){
                console.log( "Turn advancement failed." );
            });
        } else {
            console.log( "Failed to read value of 'turns'");
        }
    });

    let display = new Display(param,
        $('#totalTicksDisplay'),
        $('#totalDaysDisplay'),
        $('#currentTickDisplay'),
        document.getElementById("world-canvas"),
        function(display){
                $('#continueButton').prop('disabled',false);
            }
        );
});


    </script>
</head>
<body>
<div class="container">
    <div class="header-row">
    </div>
    <div class="world-title">
        <div class="world-label">World:</div>
        <div class="world-id" id="world-id"></div>
    </div>
    <div class="dashboard">
        <div>Ticks:</div>
        <div id="totalTicksDisplay"></div>
        <div>Days:</div>
        <div id="totalDaysDisplay"></div>
        <div>Tick:</div>
        <div id="currentTickDisplay"></div>
    </div>
    <div class="focal">
        <canvas id="world-canvas" name="world-canvas" class="oracle-canvas"></canvas>
    </div>
    <div class="sidebar"></div>
    <div class="footer-row"></div>
    <div class="footer-button">
        <div class="center-dev">Turns</div>
        <input class="center-dev" id="turnCount" name="turnCount" size=9 type="text" value="1">
        <button id="continueButton" name="continueButton" class="center-dev" disabled>&gt;&gt;&gt;</button>
    </div>
</div>
</body>
</html>